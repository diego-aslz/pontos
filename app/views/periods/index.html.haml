- title l(@base, format: '%B/%Y')

.months
  .left
    = link_to_month t(:previous_month), @base.prev_month
  .mid
    = link_to_month t(:current_month), Date.today
  .right
    = link_to_month t(:next_month), @base.next_month

%table.horaries-table
  - # FIRST TABLE HEADING
  %tr
    %th{colspan: 2}
    %th{colspan: 3}=t :morning
    %th{colspan: 3}=t :afternoon
  - # SECOND TABLE HEADING
  %tr
    %th{colspan: 2}= Period.human_attribute_name :day
    %th= Period.human_attribute_name :start
    %th= Period.human_attribute_name :finish
    %th.tiny
    %th= Period.human_attribute_name :start
    %th= Period.human_attribute_name :finish
    %th.tiny
  - month = Date.new(@base.year, @base.month, -1)
  - last = month.day
  - 1.upto last do |day|
    - month = month.change day: day
    - morning = periods_for(@periods, day, true).first
    - afternoon = periods_for(@periods, day).first
    - # TABLE CONTENT
    - if month.sunday? || month.saturday?
      - # WEEKEND
      %tr.weekend
        %td.day= l month, format: '%a'
        %td.day= l month, format: '%d'
        %td{colspan: 6}
    - else
      - # COMMON DAYS
      %tr
        %td.day= l month, format: '%a'
        %td.day= l month, format: '%d'
        = show_period morning, month, true
        = show_period afternoon, month
